<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:hdp="http://www.springframework.org/schema/hadoop"
	xmlns:yarn="http://www.springframework.org/schema/yarn" xmlns:yarn-int="http://www.springframework.org/schema/yarn/integration"
	xmlns:yarn-batch="http://www.springframework.org/schema/yarn/batch"
	xsi:schemaLocation="
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
    http://www.springframework.org/schema/hadoop http://www.springframework.org/schema/hadoop/spring-hadoop-2.0.xsd
	http://www.springframework.org/schema/yarn http://www.springframework.org/schema/yarn/spring-yarn-2.0.xsd
    http://www.springframework.org/schema/yarn/integration http://www.springframework.org/schema/yarn/integration/spring-yarn-integration-2.0.xsd
    http://www.springframework.org/schema/yarn/batch http://www.springframework.org/schema/yarn/batch/spring-yarn-batch-2.0.xsd">
	<bean id="hadoopCluster"
		class="org.springframework.data.hadoop.test.support.HadoopClusterFactoryBean">
		<property name="clusterId" value="HadoopClusterTests" />
		<property name="autoStart" value="true" />
		<property name="nodes" value="2" />
	</bean>

	<bean id="hadoopConfiguration"
		class="org.springframework.data.hadoop.test.support.ConfigurationDelegatingFactoryBean">
		<property name="cluster" ref="hadoopCluster" />
	</bean>

	<bean id="yarnCluster"
		class="org.springframework.yarn.test.support.YarnClusterFactoryBean">
		<property name="clusterId" value="YarnClusterTests" />
		<property name="autoStart" value="true" />
		<property name="nodes" value="3" />
	</bean>

	<bean id="yarnConfiguration"
		class="org.springframework.yarn.test.support.ConfigurationDelegatingFactoryBean">
		<property name="cluster" ref="yarnCluster" />
	</bean>

	<hdp:job id="matrixMultiplyJobConfiguration" configuration-ref="yarnConfiguration"
		properties-location="classpath:/META-INF/hadoop/matrix-multiplication.properties" />

	<hdp:job-runner id="matrixMultiplyJobRunner"
		run-at-startup="false" job-ref="matrixMultiplyJobConfiguration" />
</beans>